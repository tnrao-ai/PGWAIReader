@tailwind base;
@tailwind components;
@tailwind utilities;

body {
  transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;
  -webkit-tap-highlight-color: transparent; /* nicer taps on iOS/Android */
}

/* ==========================================================
   Mobile/Touch stability for puzzles
   ========================================================== */

/* Outer guard: blocks page gestures outside the internal scroller */
.puzzle-touch-guard {
  touch-action: none;               /* lock page gestures; inner scroller opts back in */
  -ms-touch-action: none;
  overscroll-behavior: contain;     /* no rubber-band into page */
  user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
  position: relative;
}

/* Inner scroll area: allows two-axis panning for big grids on small screens */
.puzzle-scroller {
  overflow: auto;
  touch-action: pan-x pan-y;        /* re-enable panning inside */
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
  max-width: 100%;
  max-height: 85vh;                 /* taller so you can see more rows; was 75vh */
  background: transparent;
  border-radius: 0.5rem;
}

/* Zoom wrapper: make scaling predictable in all engines */
.puzzle-zoom {
  display: inline-block;            /* so scaled box sizes to content */
  transform-origin: top left;       /* for transform fallback */
}

/* (Legacy variant) visually bounded area with no internal scroll */
.puzzle-touch-guard-fixed {
  max-width: 100%;
  max-height: 85vh;
  overflow: hidden;
  border-radius: 0.75rem;
}

/* Buttons/links inside still tap quickly */
.puzzle-touch-guard button,
.puzzle-touch-guard a {
  touch-action: manipulation;
}

/* Pointer-friendly hint class for grids */
.puzzle-pointer-surface {
  cursor: pointer;
  -webkit-user-drag: none;
}

/* Optional highlights for selected/correct cells */
.ww-selected {
  background-color: rgba(59,130,246,0.18); /* Tailwind blue-500 @ ~18% */
}
.ww-correct {
  background-color: rgba(16,185,129,0.22); /* emerald-500 @ ~22% */
}

/* ==========================================================
   Desktop/Laptop behavior (>= 1024px): show the whole puzzle,
   no internal clipping, leave room below for messages.
   ========================================================== */
@media (min-width: 1024px) {
  .puzzle-scroller {
    max-height: none !important;    /* remove vertical cap */
    overflow: visible !important;   /* let the board size naturally */
  }
  .puzzle-touch-guard {
    touch-action: auto;             /* desktop scroll is fine outside the board */
  }
}

/* ==========================================================
   Mobile UI compaction (reader/library/toolbars)
   Frees vertical space for reading on phones.
   ========================================================== */
@media (max-width: 480px) {
  /* Compact common button paddings (Tailwind-like utilities) */
  .px-4.py-2 {
    padding-left: 0.5rem !important;
    padding-right: 0.5rem !important;
    padding-top: 0.375rem !important;
    padding-bottom: 0.375rem !important;
  }

  /* Slightly reduce oversized headings often used in toolbars */
  .text-lg { font-size: 1rem !important; }        /* was ~1.125rem */
  .text-xl { font-size: 1.125rem !important; }    /* was ~1.25rem */

  /* Reader/toolbars: keep controls slimmer */
  .reader-toolbar button,
  .reader-toolbar .btn,
  .library-toolbar button,
  .library-toolbar .btn {
    padding: 0.375rem 0.5rem !important;
    line-height: 1.1;
  }

  /* Shorter bottom bars if you use them */
  .reader-bottombar,
  .toolbar-compact {
    padding-top: 0.375rem !important;
    padding-bottom: 0.375rem !important;
  }
}

/* Optional: hide scrollbars for a cleaner mobile look (uncomment if desired) */
/*
.puzzle-scroller::-webkit-scrollbar { width: 0; height: 0; }
.puzzle-scroller { scrollbar-width: thin; scrollbar-color: transparent transparent; }
*/
